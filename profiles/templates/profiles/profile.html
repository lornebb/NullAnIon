{% extends "base.html" %}
{% load static %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'profiles/css/profile.css' %}">
{% endblock %}

{% block page_header %}
  <div class="columns is-hidden-mobile">
    <div class="column">

    </div>
  </div>
{% endblock %}

{% block content %}
<main class="site-content">
  <section class="container is-fluid">
    <div class="columns">
      <div class="column is-one-quarter is-hidden-mobile">
        {% include 'includes/info-main.html' %}
      </div>
      <div class="column">    
        <p class="title">PROFILE</p>
        <!-- USER DETAILS -->
        <div class="columns">
          <div class="column">
            <p> User Name: <strong> {{ profile }} </strong></p>
            <p> First Name: <strong> {{ user.first_name }} </strong></p>
            <p> Last Name: <strong> {{ user.last_name }} </strong></p>
            <p> email: <strong> {{ user.email }} </strong></p>
          </div>
        </div>
        <div class="columns">
          <div class="column">
            <h2 class="title is-2">Your information</h2>
            <form action={% url 'profile' %} method="POST" id="profile-update-form">
              {% csrf_token %}
              {{ form|crispy }}
              <button class="button" type="submit">Update</button>
            </form>
          </div>
        </div>
        <!-- USER ORDER TABLE -->
        <div class="columns">
          <div class="column">
            <div class="order-history">
              <p>Your Order History</p>
              <table class="table">
                <thead>
                  <tr>
                    <th>Order Number</th>
                    <th>Date</th>
                    <th>Type</th>
                    <th>Order Total</th>
                  </tr>
                </thead>
                <tbody>
                  {% for order in orders %}
                    <tr>
                      <td>
                        <a href="{% url 'order_history' order.order_number %}"
                        title="{{ order.order_number }}">
                          {{ order.order_number|truncatechars:6 }}
                        </a>
                      </td>
                      <td>{{ order.date }}</td>
                      <td>
                        <ul class="">
                          {% if order.mix_extras %}
                            {% for mix in order.mix_extras %}
                              <li>
                                {{ mix }}
                              </li>
                            {% endfor %}
                          {% endif %}
                        </ul>
                      </td>
                      <td>$ {{ order.grand_total }}</td>
                    </tr>
                  {% endfor %}
                </tbody>
              </table>
            </div>
          </div>
        </div>
        <!-- CONVERSATION -->
        <div class="columns">
          <div class="column">
            <p>Conversation</p>
          </div>
        </div>
      </div>
    </div>
  </section>
</main>
{% endblock %}